<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<body>
<div th:fragment="cabecera(titulo, destinoBoton, textoBoton, nombreUsuario)">
	<div class="bg-dark text-white py-3 px-4 rounded mb-4 shadow-sm">
		<div class="d-flex flex-column flex-md-row justify-content-between align-items-center gap-2">
		
			<div>
			<h2 class="mb-0" th:text="${titulo}">ðŸ“˜ Informe de fichajes</h2>
			<small class="text-light fst-italic">
			<span>Hola, </span><span th:text="${nombreUsuario.toUpperCase()}">Usuario</span><span> Â· </span>
			<span th:text="${#dates.format(#dates.createNow(), 'EEEE d MMMM yyyy')}">Hoy</span>
			</small>
			</div>

			<div class="d-flex flex-column flex-md-row gap-2">
				<a class="btn btn-outline-light" th:href="${destinoBoton}" th:text="${textoBoton}">Volver</a>
				<form th:action="@{/logout}" method="post">
			  		<button type="submit" class="btn btn-outline-danger">ðŸ”’ Cerrar sesiÃ³n</button>
				</form>
			 </div>
			 <button id="toggleTheme" class="btn btn-outline-secondary mb-3 w-100">ðŸŒž / ðŸŒ™</button>

		</div>
	</div>
</div>

<div th:fragment="footer(nombreUsuario)">
	<footer class="mt-5 pt-3 border-top text-muted" style="font-size:0.9rem;">
		<div class="d-flex justify-content-between">
			<div>
				<span> Usuario conectado: </span>
				<strong th:text="${nombreUsuario}"> Usuario</strong>
			</div>
			<div>
				<span>Fecha</span>
				<span th:text="${#dates.format(#dates.createNow(), 'EEEE d MMMM yyyy - HH:mm')}">Fecha actual</span>
			</div>
		</div>
		<div class="mt-2 text-end fst-italic">
			<span th:text="${titulo}">Informe</span>
		</div>
	</footer>
</div>

<script>
document.getElementById('toggleTheme').onclick = function () {
  document.body.classList.toggle('dark-mode');
  localStorage.setItem('modoOscuro', document.body.classList.contains('dark-mode'));
};

window.onload = function () {
  if (localStorage.getItem('modoOscuro') === 'true') {
    document.body.classList.add('dark-mode');
  }
};
</script>
</body>
</html>
